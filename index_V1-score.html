<html>


<!--Le bouton va permettre de débuter le jeu en appelant la fonction debuter()-->
<button id="debuter" onclick="debuter()">Débuter</button>


</br>
</br>


<!--Div qui contient les chiffres-->
<div id="calcul" style="float:left;padding-left:60px">

<div id="chiffre1" style="float:left;font-size: xx-large;" ></div>
<div id="operateur" style="float:left;font-size: xx-large;"></div>
<div id="chiffre2" style="float:left;font-size: xx-large;"></div>

</div>


</br>
</br>
</br>


<!--Textbox réponse de l'utilisateur, pour entrer la réponse il faut appuyer sur entrée ce qui va appeler la fonction verif()-->
<input class="input" id="reponse" name="reponse" style="float:left;" placeholder="Entrer la réponse" onkeyup="if(event.keyCode==13) verif()">


<!--Div qui contient les statistiques du jeux-->
<div id="stats" style="float:right; padding-right:75px">

<div style="float:left;">Nombre de bonnes reponses :&nbsp;</div>
<div id="bonne" style="float:left;font-weight:bold;">0</div>

<div style="float:left;">&nbsp; Nombre d'erreurs : &nbsp;</div>
<div id="erreur" style="float:left;font-weight:bold;">0</div>

<div style="float:left;"> &nbsp;Questions restantes :&nbsp;</div>
<div id="restant" style="float:left;font-weight:bold;">10</div>

</div>  


</html>

<!--JAVASCRIPT-->
<script>
    
    // Variables globales
    var bonne_rep, nb_erreurs = 0;
    var nb_questions = 10;

    //Fonction appelée lors de l'appuie du bouton Débuter.
    function debuter()
    {
        bonne_rep = 0;
        nb_erreurs = 0;
        nb_questions = 10;

        init();
        suivant();
    }

    //Fonction qui va réinitialiser les statistiques
    function init()
    {
        document.getElementById('erreur').innerText = nb_erreurs;
        document.getElementById('bonne').innerText = bonne_rep;
    }

    function suivant()
    {

        document.getElementById('restant').innerText = nb_questions;
        //On vide la textbox
        document.getElementById('reponse').value = "";

        //On ajoute le calcul
        remplir();
    }

    
    function verif()
    {
        //On change le nombre de questions restantes

        
        //On récupere toutes les valeurs.
        var reponse = document.getElementById('reponse').value;
        var chiffre1 = document.getElementById("chiffre1").innerHTML;
        var chiffre2 = document.getElementById("chiffre2").innerHTML;
        var operateur = document.getElementById("operateur").innerHTML;

        //On va faire le calcul pour avoir le bon résultat, le switch va permettre de calculer en fonction de l'opérateur
        var correction;
        switch (operateur)
        {
            case '+' :
                //On va mettre ici parseFloat car sinon chiffre1 et chiffre2 vont être concaténés
                correction =  parseFloat(chiffre1)  + parseFloat(chiffre2) ;
                break;

            case '-' :
                correction = chiffre1 - chiffre2;
                break;
            
            case 'x' :
                correction = chiffre1 * chiffre2;
                break;
        }

        if(reponse == correction)
        {
            bonne_rep += 1;
            document.getElementById('bonne').innerText = bonne_rep;

        }
        else
        {
            nb_erreurs += 1;
            document.getElementById('erreur').innerText = nb_erreurs; 
        }

        if(nb_questions != 0)
        {
            nb_questions = nb_questions - 1;
            suivant();
        }
        else
        {
            alert("Jeux terminé vous avez " + bonne_rep + " bonnes réponses!");
        }

        
    }

    function remplir()
    {
        operateur = getRandomOperator();
        chiffre1 = getRandomNumber(1,9);
        chiffre2 = getRandomNumber(1,9);

        if(operateur == "-")
        {
            chiffre1 = verifNegatif(chiffre1, chiffre2);
        }

        document.getElementById("chiffre1").innerText = chiffre1;
        document.getElementById("operateur").innerText = operateur;
        document.getElementById("chiffre2").innerText = chiffre2;
    }

    function verifNegatif(chiffre1, chiffre2)
    {
        while(chiffre2 > chiffre1)
        {
            chiffre1 = getRandomNumber(1,9);
        }
        return chiffre1;
    }
    

    function getRandomNumber(min, max)
    {
        
        // On arrondit à la décimale
        min = Math.ceil(min); 
        max = Math.floor(max);

        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    
    function getRandomOperator()
    {
        const operators = ["+", "x", "-"];

        const random = Math.floor(Math.random() * operators.length);

        return operators[random];

    }

    function classement()
    {
        var i = 0;
        var file = new ActiveXObject("Scripting.FileSystemObject");
        var a = file.CreateTextFile("C:\\Classement.txt", true);
        alert(" Ecriture dans le fichier ");
        a.WriteLine(score);
        a.close();
        /*for(i=0; i< = 10)
        {
            if (score < tab[i]) {
                //On regarde si le score au dessus est plus grand ou non et on l'inscrit dans le i-1
            }
        }*/

    }
</script>

